!function(){var _$DOMHelpers_2={};Object.defineProperty(_$DOMHelpers_2,"__esModule",{value:!0}),_$DOMHelpers_2.$=function(e,t){return(t=t||D).querySelector(e)},_$DOMHelpers_2.$create=function(e,t,r,n){return t=t||{},n=D.createElement(e),Object.keys(t).forEach(function(e){n.setAttribute(e,t[e])}),r&&(Array.isArray(r)?r:[r]).forEach(function(e){n.appendChild(e.nodeType?e:D.createTextNode(e))}),n};var D=document,_$MessageHandler_3={};Object.defineProperty(_$MessageHandler_3,"__esModule",{value:!0}),_$MessageHandler_3.default=void 0;var _default=function(e,t,r){e.addEventListener("message",function(e){if(e.origin===t){var r=e.data.function,n=e.data.arguments;r&&n&&"function"==typeof this[r]&&this[r].apply(this,n)}}.bind(this)),this.setTitle=function(e){document.title=e},this.setScore=function(e){r.setScore(e)},this.setLessonStatus=function(e){r.setLessonStatus(e)}};_$MessageHandler_3.default=_default;var _$SCORMAdapter_4={};(function(global){"use strict";function SCORMAdapter(errorCallback){this._API=null,this._isSCORM2004=null,this._errorCallback="function"==typeof errorCallback?errorCallback:function(){},this.initialize=function(){this.findAndSetAPI()},this.findAndSetAPI=function(){var e=this._findAPIInWindow(global);null==e&&null!=global.opener&&void 0!==global.opener&&(e=this._findAPIInWindow(global.opener)),null==e?console.error("Unable to find an API adapter"):(this._API=e.API,this._isSCORM2004=e.isSCORM2004),null==this._API&&console.error("Couldn't find the API!")},this.foundAPI=function(){return!!this._API},this._findAPIInWindow=function(e){for(var t=0;null==e.API&&null==e.API_1484_11&&null!=e.parent&&e.parent!=e;){if(++t>7)return console.error("Error finding API -- too deeply nested."),null;e=e.parent}return e.API?{API:e.API,isSCORM2004:!1}:e.API_1484_11?{API:e.API_1484_11,isSCORM2004:!0}:null},this._callAPIFunction=function(e,t){if(null!=this._API)return this._isSCORM2004&&0==e.indexOf("LMS")?e=e.substr(3):this._isSCORM2004||0!=!e.indexOf("LMS")||(e="LMS"+e),this._API[e].apply(this._API,t);this._warnNOAPI()},this.LMSInitialize=function(){var result=this._callAPIFunction("Initialize",arguments);return result=eval(result.toString()),result||this._handleError(),result},this.LMSTerminate=function(){var result=this._callAPIFunction(this._isSCORM2004?"Terminate":"Finish",arguments);return result=eval(result.toString()),result||this._handleError(),result},this.LMSFinish=this.LMSTerminate,this.LMSGetValue=function(){var e=this._callAPIFunction("GetValue",arguments);return 0===this.LMSGetLastError()?e:(this._handleError(),null)},this.LMSSetValue=function(){var result=this._callAPIFunction("SetValue",arguments);return result=eval(result.toString()),result||this._handleError(),result.toString()},this.LMSCommit=function(){var result=this._callAPIFunction("Commit",arguments);return result=eval(result.toString()),result||this._handleError(),result},this.LMSGetLastError=function(){return parseInt(this._callAPIFunction("GetLastError",arguments))},this.LMSGetErrorString=function(){return this._callAPIFunction("GetErrorString",arguments)},this.LMSGetDiagnostic=function(){return this._callAPIFunction("GetDiagnostic",arguments)},this._handleError=function(){var e=this.LMSGetLastError(),t=this.LMSGetErrorString(e),r=this.LMSGetDiagnostic(e);0!==e&&(console.warn("An error occured on the SCORM API:","Error "+e+": "+t,r),this._errorCallback(t,r&&r!=e?r:null))},this._warnNOAPI=function(){console.warn("Cannot execute this function because the SCORM API is not available."),this._errorCallback("The API of the LMS was not found.")},this.getLearnerId=function(){var e=this._isSCORM2004?"cmi.learner_id":"cmi.core.student_id";return this.LMSGetValue(e)},this.setScore=function(e){var t=this._isSCORM2004?"cmi.score.scaled":"cmi.core.score.raw";this._isSCORM2004&&(e/=100),this.LMSSetValue(t,e),this.LMSCommit("")},this.setLessonStatus=function(e){if(this._isSCORM2004){var t="unknown";"passed"!==e&&"failed"!==e||(t=e),this.LMSSetValue("cmi.success_status",t);var r="unknown";"passed"===e||"completed"===e?r="completed":"incomplete"===e?r="incomplete":"not attempted"!==e&&"browsed"!==e||(r="not attempted"),this.LMSSetValue("cmi.completion_status",r)}else this.LMSSetValue("cmi.core.lesson_status",e);this.LMSCommit("")},this.setSessionTime=function(e){var t=this._isSCORM2004?"cmi.session_time":"cmi.core.session_time",r=Math.floor(e/1e3/60/60);e-=1e3*r*60*60;var n=Math.floor(e/1e3/60);e-=1e3*n*60;var i=Math.floor(e/1e3);i<10&&(i="0"+i),n<10&&(n="0"+n),r<10&&(r="0"+r);var a=r+":"+n+":"+i;this.LMSSetValue(t,a),this.LMSCommit("")},this.initialize()}Object.defineProperty(_$SCORMAdapter_4,"__esModule",{value:!0}),_$SCORMAdapter_4.default=void 0;var _default=SCORMAdapter;_$SCORMAdapter_4.default=_default}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});var _$i18n_6={};Object.defineProperty(_$i18n_6,"__esModule",{value:!0}),_$i18n_6.default=function(e){return(i18n_txt[(navigator.language||navigator.userLanguage||"en").split(/[_-]/)[0]]||i18n_txt.en)[e]||e};var i18n_txt={en:{pageTitle:"Your content is loading...",pageSubtitle:"Please wait, or if your content doesn't appear, try closing and opening this window again.",pageErrorMessagesTitle:"If the initialization fails, error messages will appear below:",pageFooter:'This content is loaded via <a href="https://github.com/Didask/scol-r" target="_blank">SCOL-R</a>, a cross-domain SCORM connector created by <a href="https://www.didask.com" target="_blank">Didask</a>.',apiNotFound:"<p>We were not able to contact your LMS: please close this window and try again later.</p>",couldNotInitialize:"<p>We were not able to initialize the connection with your LMS: please close this window and try again later.</p>",learnerIdMissing:"<p>We could not get your learner ID from the LMS: please close this window and try again later.</p>",sourceUrlMissing:"<p>We could find the address of the remote resource: it looks like this module is invalid, please contact your LMS administrator.</p>",runtimeErrorTitle:"An error occurred:"},fr:{pageTitle:"Votre contenu est en cours de chargement...",pageSubtitle:"Merci de patienter&nbsp;; si votre contenu ne se charge pas, veuillez essayer de fermer et d'ouvrir cette fen\xeatre \xe0 nouveau.",pageErrorMessagesTitle:"Si l'initialisation \xe9choue, les messages d'erreur appara\xeetront ci-dessous&nbsp;:",pageFooter:'Ce contenu est charg\xe9 via <a href="https://github.com/Didask/scol-r" target="_blank">SCOL-R</a>, un connecteur SCORM cross-domaine cr\xe9\xe9 par <a href="https://www.didask.com" target="_blank">Didask</a>.',apiNotFound:"<p>Nous n'avons pas pu contacter votre LMS&nbsp;: veuillez fermer cette fen\xeatre et r\xe9essayer plus tard.</p>",couldNotInitialize:"<p>Nous n'avons pas pu initialiser la connection avec votre LMS&nbsp;: veuillez fermer cette fen\xeatre et r\xe9essayer plus tard.</p>",learnerIdMissing:"<p>Nous n'avons pas pu obtenir votre identifiant depuis le LMS&nbsp;: veuillez fermer cette fen\xeatre et r\xe9essayer plus tard.</p>",sourceUrlMissing:"<p>Nous n'avons pas pu trouver l'adresse de la ressource distante&nbsp;: il semble que ce module est invalide, veuillez contacter l'administrateur de votre LMS.</p>",runtimeErrorTitle:"Une erreur s'est produite&nbsp;:"}},_$errors_5={};Object.defineProperty(_$errors_5,"__esModule",{value:!0}),_$errors_5.RuntimeError=_$errors_5.InitError=void 0;var obj,_i18n=(obj=_$i18n_6)&&obj.__esModule?obj:{default:obj};_$errors_5.InitError=function(e){var t=(0,_$DOMHelpers_2.$)(".messages");t&&t.appendChild((0,_$DOMHelpers_2.$create)("p",{},(0,_i18n.default)(e)))},_$errors_5.RuntimeError=function(){var e=(0,_$DOMHelpers_2.$)("#runtime-error");e.innerHTML="";for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];r.length&&(e.innerHTML="<h6>"+(0,_i18n.default)("runtimeErrorTitle")+"</h6>",r.forEach(function(t){e.appendChild((0,_$DOMHelpers_2.$create)("p",{},(0,_i18n.default)(t)))}),setTimeout(function(){e.innerHTML=""},3e3))};var _$loadContent_7={};Object.defineProperty(_$loadContent_7,"__esModule",{value:!0}),_$loadContent_7.default=void 0;var ___i18n_7=_interopRequireDefault(_$i18n_6),_MessageHandler=_interopRequireDefault(_$MessageHandler_3),_SCORMAdapter=_interopRequireDefault(_$SCORMAdapter_4);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var ___default_7=function(){(0,_$DOMHelpers_2.$)("#title").innerHTML=(0,___i18n_7.default)("pageTitle"),(0,_$DOMHelpers_2.$)("#subtitle").innerHTML=(0,___i18n_7.default)("pageSubtitle"),(0,_$DOMHelpers_2.$)("#footer-content").innerHTML=(0,___i18n_7.default)("pageFooter"),(0,_$DOMHelpers_2.$)("#title-error-messages").innerHTML=(0,___i18n_7.default)("pageErrorMessagesTitle");try{var e=new _SCORMAdapter.default(_$errors_5.RuntimeError),t=document.body.getAttribute("data-source"),r=new Date;if(!e.foundAPI())throw"apiNotFound";if(!e.LMSInitialize(""))throw"couldNotInitialize";var n=e.getLearnerId();if(null==n)throw"learnerIdMissing";if(!t)throw"sourceUrlMissing";var i=(0,_$DOMHelpers_2.$create)("a",{href:t});i.search+=(i.search[0]?"&":"?")+["scorm","learner_id=".concat(n),"lms_origin=".concat(location.origin)].join("&"),document.body.insertBefore((0,_$DOMHelpers_2.$create)("iframe",{src:i.href,frameborder:"0"}),(0,_$DOMHelpers_2.$)("#wrapper")),new _MessageHandler.default(window,i.origin,e),window.addEventListener("beforeunload",function(){e.setSessionTime(new Date-r),e.LMSCommit(""),e.LMSFinish("")})}catch(a){(0,_$errors_5.InitError)(a)}};_$loadContent_7.default=___default_7;var _$src_1={};(function(e){"use strict";var t,r=(t=_$loadContent_7)&&t.__esModule?t:{default:t};e.loadContent=r.default}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})}();