!function(){var _$MessageHandler_2={};Object.defineProperty(_$MessageHandler_2,"__esModule",{value:!0}),_$MessageHandler_2.default=void 0;var _default=function(e,t,n){e.addEventListener("message",function(e){if(e.origin===t){var n=e.data.function,i=e.data.arguments;n&&i&&"function"==typeof this[n]&&this[n].apply(this,i)}}.bind(this)),this.setTitle=function(e){document.title=e},this.setScore=function(e){n.setScore(e)},this.setLessonStatus=function(e){n.setLessonStatus(e)}};_$MessageHandler_2.default=_default;var _$SCORMAdapter_3={};function SCORMAdapter(errorCallback){this._API=null,this._isSCORM2004=null,this._errorCallback="function"==typeof errorCallback?errorCallback:function(){},this.initialize=function(){this.findAndSetAPI()},this.findAndSetAPI=function(){var e=this._findAPIInWindow(window);null==e&&null!=window.opener&&void 0!==window.opener&&(e=this._findAPIInWindow(window.opener)),null==e?console.error("Unable to find an API adapter"):(this._API=e.API,this._isSCORM2004=e.isSCORM2004),null==this._API&&console.error("Couldn't find the API!")},this.foundAPI=function(){return!!this._API},this._findAPIInWindow=function(e){for(var t=0;null==e.API&&null==e.API_1484_11&&null!=e.parent&&e.parent!=e;){if(++t>7)return console.error("Error finding API -- too deeply nested."),null;e=e.parent}return e.API?{API:e.API,isSCORM2004:!1}:e.API_1484_11?{API:e.API_1484_11,isSCORM2004:!0}:null},this._callAPIFunction=function(e,t){if(null!=this._API)return this._isSCORM2004&&0==e.indexOf("LMS")?e=e.substr(3):this._isSCORM2004||0!=!e.indexOf("LMS")||(e="LMS"+e),this._API[e].apply(this._API,t);this._warnNOAPI()},this.LMSInitialize=function(){var result=this._callAPIFunction("Initialize",arguments);return result=eval(result.toString()),result||this._handleError(),result},this.LMSTerminate=function(){var result=this._callAPIFunction(this._isSCORM2004?"Terminate":"Finish",arguments);return result=eval(result.toString()),result||this._handleError(),result},this.LMSFinish=this.LMSTerminate,this.LMSGetValue=function(){var e=this._callAPIFunction("GetValue",arguments);return 0===this.LMSGetLastError()?e:(this._handleError(),null)},this.LMSSetValue=function(){var result=this._callAPIFunction("SetValue",arguments);return result=eval(result.toString()),result||this._handleError(),result.toString()},this.LMSCommit=function(){var result=this._callAPIFunction("Commit",arguments);return result=eval(result.toString()),result||this._handleError(),result},this.LMSGetLastError=function(){return parseInt(this._callAPIFunction("GetLastError",arguments))},this.LMSGetErrorString=function(){return this._callAPIFunction("GetErrorString",arguments)},this.LMSGetDiagnostic=function(){return this._callAPIFunction("GetDiagnostic",arguments)},this._handleError=function(){var e=this.LMSGetLastError(),t=this.LMSGetErrorString(e),n=this.LMSGetDiagnostic(e);0!==e&&(console.warn("An error occured on the SCORM API:","Error "+e+": "+t,n),this._errorCallback(t,n&&n!=e?n:null))},this._warnNOAPI=function(){console.warn("Cannot execute this function because the SCORM API is not available."),this._errorCallback("The API of the LMS was not found.")},this.getLearnerId=function(){var e=this._isSCORM2004?"cmi.learner_id":"cmi.core.student_id";return this.LMSGetValue(e)},this.setScore=function(e){var t=this._isSCORM2004?"cmi.score.scaled":"cmi.core.score.raw";this._isSCORM2004&&(e/=100),this.LMSSetValue(t,e),this.LMSCommit("")},this.setLessonStatus=function(e){if(this._isSCORM2004){var t="unknown";"passed"!==e&&"failed"!==e||(t=e),this.LMSSetValue("cmi.success_status",t);var n="unknown";"passed"===e||"completed"===e?n="completed":"incomplete"===e?n="incomplete":"not attempted"!==e&&"browsed"!==e||(n="not attempted"),this.LMSSetValue("cmi.completion_status",n)}else this.LMSSetValue("cmi.core.lesson_status",e);this.LMSCommit("")},this.setSessionTime=function(e){var t=this._isSCORM2004?"cmi.session_time":"cmi.core.session_time",n=Math.floor(e/1e3/60/60);e-=1e3*n*60*60;var i=Math.floor(e/1e3/60);e-=1e3*i*60;var r=Math.floor(e/1e3);r<10&&(r="0"+r),i<10&&(i="0"+i),n<10&&(n="0"+n);var a=n+":"+i+":"+r;this.LMSSetValue(t,a),this.LMSCommit("")},this.initialize()}Object.defineProperty(_$SCORMAdapter_3,"__esModule",{value:!0}),_$SCORMAdapter_3.default=void 0;var ___default_3=SCORMAdapter;_$SCORMAdapter_3.default=___default_3;var _$i18n_4={};Object.defineProperty(_$i18n_4,"__esModule",{value:!0}),_$i18n_4.default=function(e){return(i18n_txt[(navigator.language||navigator.userLanguage||"en").split(/[_-]/)[0]]||i18n_txt.en)[e]||e};var i18n_txt={en:{pageTitle:"Your content is loading...",pageSubtitle:"Please wait, or if your content doesn't appear, try closing and opening this window again.",pageErrorMessagesTitle:"If the initialization fails, error messages will appear below:",pageFooter:'This content is loaded via <a href="https://github.com/Didask/scol-r" target="_blank">SCOL-R</a>, a cross-domain SCORM connector created by <a href="https://www.didask.com" target="_blank">Didask</a>.',apiNotFound:"<p>We were not able to contact your LMS: please close this window and try again later.</p>",couldNotInitialize:"<p>We were not able to initialize the connection with your LMS: please close this window and try again later.</p>",learnerIdMissing:"<p>We could not get your learner ID from the LMS: please close this window and try again later.</p>",sourceUrlMissing:"<p>We could find the address of the remote resource: it looks like this module is invalid, please contact your LMS administrator.</p>",runtimeErrorTitle:"An error occurred:"},fr:{pageTitle:"Votre contenu est en cours de chargement...",pageSubtitle:"Merci de patienter&nbsp;; si votre contenu ne se charge pas, veuillez essayer de fermer et d'ouvrir cette fen\xeatre \xe0 nouveau.",pageErrorMessagesTitle:"Si l'initialisation \xe9choue, les messages d'erreur appara\xeetront ci-dessous&nbsp;:",pageFooter:'Ce contenu est charg\xe9 via <a href="https://github.com/Didask/scol-r" target="_blank">SCOL-R</a>, un connecteur SCORM cross-domaine cr\xe9\xe9 par <a href="https://www.didask.com" target="_blank">Didask</a>.',apiNotFound:"<p>Nous n'avons pas pu contacter votre LMS&nbsp;: veuillez fermer cette fen\xeatre et r\xe9essayer plus tard.</p>",couldNotInitialize:"<p>Nous n'avons pas pu initialiser la connection avec votre LMS&nbsp;: veuillez fermer cette fen\xeatre et r\xe9essayer plus tard.</p>",learnerIdMissing:"<p>Nous n'avons pas pu obtenir votre identifiant depuis le LMS&nbsp;: veuillez fermer cette fen\xeatre et r\xe9essayer plus tard.</p>",sourceUrlMissing:"<p>Nous n'avons pas pu trouver l'adresse de la ressource distante&nbsp;: il semble que ce module est invalide, veuillez contacter l'administrateur de votre LMS.</p>",runtimeErrorTitle:"Une erreur s'est produite&nbsp;:"}},_$loadContent_5={};Object.defineProperty(_$loadContent_5,"__esModule",{value:!0}),_$loadContent_5.default=void 0;var _i18n=_interopRequireDefault(_$i18n_4),_MessageHandler=_interopRequireDefault(_$MessageHandler_2),_SCORMAdapter=_interopRequireDefault(_$SCORMAdapter_3);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var ___default_5=function(){document.getElementById("title").innerHTML=(0,_i18n.default)("pageTitle"),document.getElementById("subtitle").innerHTML=(0,_i18n.default)("pageSubtitle"),document.getElementById("footer-content").innerHTML=(0,_i18n.default)("pageFooter"),document.getElementById("title-error-messages").innerHTML=(0,_i18n.default)("pageErrorMessagesTitle");var e=function(e){var t=document.getElementsByClassName("messages"),n=document.createElement("p");n.innerHTML=(0,_i18n.default)(e),t.length&&t[0].appendChild(n)},t=new _SCORMAdapter.default(function(){var e=document.getElementById("runtime-error");if(arguments&&arguments.length){e.innerHTML="<h6>"+(0,_i18n.default)("runtimeErrorTitle")+"</h6>";for(var t=0;t<arguments.length;t++)if(arguments[t]){var n=document.createElement("p");n.innerHTML=(0,_i18n.default)(arguments[t]),e.appendChild(n)}setTimeout(function(){e.innerHTML=""},3e3)}else e.innerHTML=""});if(t.foundAPI())if(t.LMSInitialize("")){var n=document.body.getAttribute("data-source");if(n){var i=document.createElement("a");i.href=n;var r=t.getLearnerId();if(null!=r){i.search+=(-1===i.search.indexOf("?")?"?":"&")+"scorm&learner_id="+r+"&lms_origin="+location.origin;var a=document.createElement("iframe");a.setAttribute("src",i.href),a.setAttribute("frameborder","0"),a.setAttribute("height","100%"),a.setAttribute("width","100%"),document.body.insertBefore(a,document.getElementById("wrapper"));var s=new Date;new _MessageHandler.default(window,i.origin,t),window.addEventListener("beforeunload",function(){var e=new Date;t.setSessionTime(e-s),t.LMSCommit(""),t.LMSFinish("")})}else e("learnerIdMissing")}else e("sourceUrlMissing")}else e("couldNotInitialize");else e("apiNotFound")};_$loadContent_5.default=___default_5;var _$src_1={};(function(e){"use strict";var t,n=(t=_$loadContent_5)&&t.__esModule?t:{default:t};e.loadContent=n.default}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})}();